@using ShopThuCungMVC.Models;
@using ShopThuCungMVC.Services;
@{
    ViewData["Title"] = "Blogs";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
@section stylesheet {
    <link href="@Url.Content("~/Content/AdminResources/bonus/css/dropzone.min.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/AdminResources/bonus/css/line.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/AdminResources/bonus/css/choices.min.css")" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
          rel="stylesheet" />
    <link rel="stylesheet"
          href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
    <link href="@Url.Content("~/Content/AdminResources/bonus/css/theme.min.css")"
          type="text/css"
          rel="stylesheet"
          id="style-default" />
    <link rel="stylesheet"
          type="text/css"
          id="mce-u0"
          href="@Url.Content("~/Content/AdminResources/bonus/css/skin.min.css")" />
    <style>
        .blog_btn {
            display: inline-block;
            font-size: 14px;
            color: #1c1c1c;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid #b2b2b2;
            padding: 10px 20px 10px;
            border-radius: 25px;
        }

        .blog__btn i {
            position: relative;
            top: 1px;
            margin-left: 5px;
        }
    </style>
    <link rel="stylesheet" href="@Url.Content("~/Content/css/style.css")" type="text/css">
}
@section script {
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/popper.min.js")"></script>
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/all.min.js")"></script>
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/lodash.min.js")"></script>
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/list.min.js")"></script>
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/dropzone.min.js")"></script>
    <script src="@Url.Content("~/Content/AdminResources/bonus/js/phoenix.js")"></script>
}
<!-- [ Main Content ] start -->
<div class="pc-container">
    <div class="pcoded-content">
        <!-- [ breadcrumb ] start -->
        <div class="page-header">
            <div class="page-block">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <!-- <div class="page-header-title">
                            <h5 class="m-b-10">Dashboard sale</h5>
                        </div> -->
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item">Quản lý tin tức</li>
                            <li class="breadcrumb-item">Tin tức</li>
                            <li class="breadcrumb-item">Danh sách tin tức</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="row gx-3 gy-2 mb-3">
                <h2 style=" font-weight: 800; text-align: center; margin-bottom: 30px;">Danh sách tin tức</h2>
                @{
                    List<Blog> listB = BlogsService.getBlog();
                    foreach (var item in listB)
                    {
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="blog__item">
                                <div class="blog__item__pic">
                                    <img src="@item.Image" alt="">
                                </div>
                                <div class="blog__item__text">
                                    <ul>
                                        <li><i class="fa fa-calendar-o"></i> @item.CreateDate</li>
                                        <li><i class="fa fa-comment-o"></i> 5</li>
                                    </ul>
                                    <h5><a href="">@item.BlogName</a></h5>
                                    <p>@item.Desription</p>
                                    @Html.ActionLink("Sửa tin tức", "AddBlog", "Blog", new { @bid = item.BlogId }, new { @class = "blog_btn edit", @style = "margin-top: 3px; text-align: center; color: red; cursor: pointer;" })
                                    @Html.ActionLink("Xóa", "DeleteBlog", "Blog", new { @bid = item.BlogId }, new { @class = "blog_btn delete", @style = "margin-top: 3px; text-align: center; color: red; cursor: pointer;" })
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
            <div class="d-flex justify-content-end">
                <ul class="pagination mb-6">
                    <li class="page-item">
                        <a class="page-link" href="#">
                            <svg class="svg-inline--fa fa-chevron-left" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M224 480c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l169.4 169.4c12.5 12.5 12.5 32.75 0 45.25C240.4 476.9 232.2 480 224 480z"></path></svg><!-- <span class="fas fa-chevron-left"> </span> Font Awesome fontawesome.com -->
                        </a>
                    </li>
                    <li class="page-item active" aria-current="page">
                        <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">2</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">3</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link pe-0" href="#"> <svg class="svg-inline--fa fa-chevron-right" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg><!-- <span class="fas fa-chevron-right"></span> Font Awesome fontawesome.com --></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- [ Main Content ] end -->
<!-- [ Main Content ] end -->
<script src="~/Content/js/jquery-3.3.1.min.js"></script>
<script>
    function deleteupdate() {
        $(".delete").each(function () {
            $(this).click(function (e) {
                e.preventDefault();
                const bid = $(this).attr("bid").substr(7);
                $.ajax({
                    url: "/Blog/DeleteBlog",
                    type: "post",
                    data: {
                        bid: bid
                    },
                    success: function (result) {
                        if (result.status) {
                            alert("xóa tin tức thành công");
                            location.reload();
                        } else {
                            alert("Không có blogid để xóa");
                        }
                    }
                })
            })
        })
    }
    $(document).ready(function () {
        deleteupdate();
    })
</script>